===============================
Developer Guide
===============================

Getting Started
###############

To run the LandCommand application:
 * Clone the ``front-end`` git repository from Bitbucket
 * Ensure you have NPM installed and run ``npm install`` from the ``react_app`` directory.
 * Run ``npm run buildmove`` on Windows or ``npm run buildmove_unix`` on Unix to build the index.js file that runs the front-end and copy it into ``flask_cc/static``.
 * Run ``pip install -r flask_cc/requirements.txt`` to install all required python packages. This should generally be done within a virtual environment or conda environment.
 * Connect to Galehead VPN. By default, the application connects to the development database that is specified in the ``.flaskenv`` file in the root directory. You must be on the VPN in order to connect to this database.
 * Run the development server by running ``flask run`` in the root directory.

Documentation
#############

.. toctree::
    :maxdepth: 1
    :caption: Contents:

    /developer/code/backend/index
    /developer/code/frontend/index

Directory Structure
###################
.. code-block:: python

    /front-end (root)
        /docs
            Sphinx-related documentation
        /flask_cc (Flask application)
            /api (Blueprint)
            /auth (Blueprint)
            /home (Blueprint)
            /static (All staticly-served files, such as JS and CSS)
            /templates (Jinja2 templates to generate html pages)
            /test (pytest tests)
        /migrations
            Flask-Migrate-generated files
        /react_app
            /components
                React Components
            /qgis2web
                Non-React TypeScript files: Openlayers code, utility functions, etc.
            /types
                Custom-defined TypeScript types
            App.tsx
            index.tsx (Entrypoint for front-end code)
            package-lock.json
            package.json
            tsconfig.json
        run.py (run app via Flask development server)
        server.py (run app via Waitress)
        .flaskenv
        .gitignore
